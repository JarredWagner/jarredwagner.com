function buildDOM(){$(baseDiv).before(loadingFA).addClass("gallery_row").wrap('<div class="gallery_wrap"></div>'),$(imgWrapper).wrap('<div class="content">'),$(container).after('<div class="pBtnWrap pBtn">'+pBtnFA+"</div>"),$(pBtn).after('<div class="nBtnWrap nBtn">'+nBtnFA+"</div>"),$(nBtn).after('<div class="start">'+startBtnFA+"</div>"),$(playBtnSelector).after('<div class="stop">'+stopBtnFA+"</div>"),$(pauseBtn).after('<div class="imageCount"></div>'),$(imageCountSelector).after('<div class="progress"></div>')}function styleDOM(){$("html, body").css("height","100%").css("overflow","hidden"),$("body").css("position","relative"),$(baseDiv).css("display","flex").css("align-items","center"),$(container).css("display","flex").css("align-items","center").css("background",$(baseDiv).css("background-color")),$(imgWrapper).css("margin","auto"),$(imgSelector).css("display","none"),$(loadingGif).css("visibility","hidden"),$(uiHovers).css("opacity",1),$(uiCursors).css("display","none").css("cursor","pointer");var e=$(progressBarSelector).css("width").replace(/[^0-9]/g,"");$(progressBarSelector).attr("data-width",e),$(progressBarSelector).css("display","none").css("visibility","hidden"),$(pnBtns).css("z-index","777").css("margin-top",0).css("margin-bottom",0).css("padding",0),$(pArrowSelector).css("left",$(pBtn).css("margin-left")),$(nArrowSelector).css("right",$(nBtn).css("margin-right"))}function lazyLoad(){$(imgSelector).each(function(){if($(this).index()>3){var e=$(this).attr("src");$(this).attr("data-src",e),$(this).attr("src","")}})}function scaleImages(){var e=$(window).height(),t=$(window).width(),i,s,n=parseInt($(imgSelector).css("border-left-width")),a=e-navHeight-footerHeight;$(imgSelector).each(function(){var i=$(this).attr("width"),s=$(this).attr("height"),n=(i/s).toFixed(2),r=(s/i).toFixed(2),o,l,c;t>e?(l=Math.round(a),o=Math.round(l*n),o>t&&(o=t,l=o*r),maxWidth>0&&(o>maxWidth&&(o=maxWidth,l=Math.round(o*r)),l>maxHeight&&(l=maxHeight,o=Math.round(l/r)))):e>t&&(o=Math.round(t),l=Math.round(o*r),l>a&&(l=a,o=l*n)),$(this).css("width",o*scaling),$(this).css("height",l*scaling),galleryArray.push(o)})}function imgContainerWidth(){for(var e=parseInt($(imgSelector).css("margin-right")),t=parseInt($(imgSelector).css("border-right-width")),i=parseInt($(pBtn).css("margin-left")),s=0,n=0,a=galleryArray.length;n<a;++n)s+=galleryArray[n]+(e+2*t);$(imgContainer).css("width",s)}function imageCount(){var e=$(activeClass).index()+1,t=$(imgSelector).length;$(imageCountSelector).html("<span>"+e+"</span> / <span>"+t+"</span>")}function slide(e,t,i,s){$(e).stop(!0,!0).animate({marginLeft:t},i,s)}function opacity(e,t,i,s){$(e).stop(!0,!0).animate({opacity:t},i,s)}function nextBtn(){$(imgContainer).stop(!0,!0);var e=$(activeClass).index(),t=e,i=e+1,s=e+3,n=imgSelector+":eq("+[s]+")",a=$(n).attr("data-src");$(n).attr("src",a),$(n).removeAttr("data-src");var r=parseInt($(imgSelector).css("margin-right")),o=parseInt($(imgSelector).css("border-left-width")),l=parseInt($(pBtn).css("margin-left")),c=galleryArray[t]/2+galleryArray[i]/2+(r+2*o),d=$(imgContainer).css("margin-left"),p=parseInt(d),g=p-c,y,m;e<galleryArray.length-1?(slide(imgContainer,g,slideSpeed,slideEasingStyle),e++,y=imgSelector+":eq("+e+")",m=imgSelector+":eq("+(e-1)+")",$(m).removeAttr("class"),opacity(m,passiveSlideOpacityLevel,slideSpeed,slideEasingStyle),$(y).addClass(active),opacity(y,1,slideSpeed+slideOpacityFadeTime,slideEasingStyle)):($(pBtn).css("visibility","hidden"),y=imgSelector+":eq(0)",m=imgSelector+":last",$(m).removeAttr("class"),opacity(m,passiveSlideOpacityLevel,slideSpeed,slideEasingStyle),$(y).addClass(active),$(imgWrapper).css("width",$(activeClass).width()+2*o),slide(imgContainer,0,slideSpeed,slideEasingStyle),opacity(y,1,slideSpeed+slideOpacityFadeTime,slideEasingStyle)),$(activeClass).index()>0&&$(pBtn).css("visibility","visible"),imageCount()}function prevBtn(){var e=$(activeClass).index(),t=e-1,i=e,s=parseInt($(imgSelector).css("margin-right")),n=parseInt($(imgSelector).css("border-left-width")),a=galleryArray[t]/2+galleryArray[i]/2+(s+2*n),r=$(imgContainer).css("margin-left"),o=parseInt(r),l=o+a;slide(imgContainer,l,slideSpeed,slideEasingStyle),e--;var c=imgSelector+":eq("+e+")",d=imgSelector+":eq("+(e+1)+")";$(d).removeClass(active),opacity(d,passiveSlideOpacityLevel,slideSpeed,slideEasingStyle),$(c).addClass(active),opacity(c,1,slideSpeed+slideOpacityFadeTime,slideEasingStyle),0===e?$(pBtn).css("visibility","hidden"):$(pBtn).css("visibility","visible")}function progressBar(){var e=$(progressBarSelector).attr("data-width");$(progressBarSelector).stop(!1,!1).css("display","block").css("visibility","visible").animate({width:e},slideDelay,"linear").animate({width:0},0)}function autoPlay(){nextBtn(),progressBar(),$(nBtn).css("opacity",1),setTimeout(function(){$(nBtn).css("opacity","")},100)}function playBtn(){var e=setInterval(autoPlay,slideDelay);$(playBtnSelector).css("display","none"),$(pauseBtn).css("display","block"),progressBar(),e.toString(),$(pauseBtn).attr("data-interval",e)}function stopBtn(){$(progressBarSelector).stop(!0,!0),$(progressBarSelector).css("width","0px"),clearInterval($(pauseBtn).attr("data-interval")),$(pauseBtn).removeAttr("data-interval"),$(playBtnSelector).css("display","block"),$(pauseBtn).css("display","none")}function bindPlayStop(){$(playBtnSelector).click(function(){playBtn()}),$(pauseBtn).click(function(){stopBtn()}),imageAutoPlay===!0?($(playBtnSelector).css("display","none"),$(pauseBtn).css("display","block")):($(playBtnSelector).css("display","block"),$(pauseBtn).css("display","none"))}function keyCommands(){function e(){$(document.documentElement).bind("keydown",t)}function t(e){37===e.keyCode&&i(),39===e.keyCode&&s(),32===e.keyCode&&n()}function i(){var t=$(activeClass).index();return 0!==t&&($(imgContainer).stop(!0,!0),$(document.documentElement).unbind("keydown"),$(pBtn).css("opacity",1),setTimeout(function(){$(pBtn).css("opacity",.5)},100),prevBtn(),stopBtn(),setTimeout(function(){e()},slideSpeed),void 0)}function s(){$(imgContainer).stop(!0,!0),$(document.documentElement).unbind("keydown"),$(nBtn).css("opacity",1),setTimeout(function(){$(nBtn).css("opacity",.5)},100),$(imgContainer).stop(!0,!0),nextBtn(),stopBtn(),setTimeout(function(){e()},slideSpeed)}function n(){var e=$(playBtnSelector).css("display"),t=$(pauseBtn).css("display");"block"===t&&($(pauseBtn).css("opacity",1),setTimeout(function(){$(pauseBtn).css("opacity",1)},100),setTimeout(function(){stopBtn()},150)),"block"===e&&($(playBtnSelector).css("opacity",1),setTimeout(function(){$(playBtnSelector).css("opacity",1)},100),setTimeout(function(){playBtn()},150))}e()}function prepSlideShow(){function e(){$(imgContainer).stop(!0,!0),$(pBtn).unbind(),$(pBtn).blur(),prevBtn(),stopBtn(),setTimeout(function(){t()},slideSpeed)}function t(){$(pBtn).bind("click",e)}function i(){$(imgContainer).stop(!0,!0),$(this).unbind(),$(this).blur(),nextBtn(),stopBtn(),setTimeout(function(){s()},slideSpeed)}function s(){$(nBtn).bind("click",i)}var n=$(window).height(),a=$(window).width(),r=parseInt($(imgSelector).css("border-right-width"));$(pBtn+", "+nBtn).css("display","block");var o=(a-100)/2;$(progressBarSelector).css("left",o+"px"),$(pBtn).css("visibility","hidden"),t(),$(nBtn).bind("click",i);var l=$(activeClass).index();0===l&&$(pBtn).css("visibility","hidden"),$(imgContainer).swipe({swipe:function(t,s,n,a,r){"left"==s?i(1):0===$(activeImg).index()||e(1)}}),imageAutoPlay===!0?($(playBtnSelector).css("display","none"),$(pauseBtn).css("display","block")):($(playBtnSelector).css("display","block"),$(pauseBtn).css("display","none"));var c=imgSelector+":eq(0)";$(c).addClass(active),$(imgSelector).css("opacity",passiveSlideOpacityLevel),$(c).css("opacity","1"),imageCount()}function fadeInGallery(){var e=$(window).width();if($(container).css("display","none").css("visibility","visible"),$(imgSelector).css("display","block"),$(pBtn+", "+nBtn).css("display","block"),$(loadingGif).css("visibility","hidden").css("display","none"),$(container).fadeIn(pageFadeSpeed),$(footer).fadeIn(pageFadeSpeed),imageAutoPlay===!0){var t=setInterval(autoPlay,slideDelay);progressBar(),t.toString(),$(pauseBtn).attr("data-interval",t)}}function resizeBurlington(){$(imgContainer).stop(!0,!0),galleryArray=[],$(imgSelector).each(function(){var e=$(this).width();galleryArray.push(e)});for(var e=$(activeClass).index(),t=0,i=0,s=e;i<s;++i)t+=galleryArray[i];var n=parseInt($(imgSelector).css("margin-right")),a=parseInt($(imgSelector).css("border-left-width")),r=-(t+2*a*e+n*e),o=2*parseInt($(pBtn).css("margin-right")),l=$(pBtn).width();$(imgWrapper).css("width",$(activeClass).width()+2*a),$(imgContainer).css("margin-left")!==r&&$(imgContainer).css("margin-left",r);var c=$(window).height(),d=$(window).width(),p=c-navHeight-footerHeight;$(container).css("height",p);var g=(d-$(progressBarSelector).attr("data-width"))/2;$(progressBarSelector).css("left",g+"px"),d<=1024?$(pArrowSelector+", "+nArrowSelector).css("display","none"):$(pArrowSelector+", "+nArrowSelector).css("display","block");var y=(c-$(nBtn).height())/2-navHeight;$(pArrowSelector+", "+nArrowSelector).css("position","fixed").css("top",y)}function loadBurlington(){$(window).unbind("resize"),$(playBtnSelector+", "+pauseBtn).unbind(),$(document.documentElement).unbind(),clearInterval($(pauseBtn).attr("data-interval")),stopBtn(),$(playBtnSelector).css("display","none"),$(pauseBtn).css("display","none"),$(progressBarSelector).css("display","none").stop(!0,!0).css("width","0px"),$(container).fadeOut(pageFadeSpeed),setTimeout(function(){$(container).css("visibility","hidden"),setTimeout(function(){$(container).css("display","none").css("display","block");var e=$(imgSelector+":eq(0)").width()/$(imgSelector+":eq(0)").height();lazyLoad(),scaleImages(),imgContainerWidth(),prepSlideShow(),resizeBurlington(),bindPlayStop(),keyCommands();var t=$(imgSelector+":eq(0)").attr("width")/$(imgSelector+":eq(0)").attr("height");e===t?(resizeBurlington(),fadeInGallery()):e!==t&&(scaleImages(),imgContainerWidth(),prepSlideShow(),resizeBurlington(),fadeInGallery())},galleryLoadDelay)},pageFadeSpeed)}function startLoading(){$(container).css("visibility","hidden");var e=$(window).height()/2-$(loadingGif).height()/2,t=$(window).width()/2-$(loadingGif).width()/2;$(loadingGif).css("position","absolute").css("top",e).css("left",t).css("display","inline-block").css("visibility","visible"),loadBurlington()}var imageAutoPlay=!0,slideDelay=2e3,slideEasingStyle="easeInOutExpo",scaling=.8,maxWidth=2e3,maxHeight=.66*maxWidth,slideSpeed=slideDelay/1.5,passiveSlideOpacityLevel=.5,slideOpacityFadeTime=slideDelay/5,pageFadeSpeed=500,galleryLoadDelay=1e3,baseDiv="#demo-photos",loadingGif=".loader",loadingFA="<i class='loader fa fa-circle-o-notch fa-spin'></i>",pBtnFA="<i class='fa fa-angle-left'></i>",nBtnFA="<i class='fa fa-angle-right'></i>",startBtnFA="<i class='fa fa-play'></i>",stopBtnFA="<i class='fa fa-pause'></i>",container=".content",loadingGif=".loader",imgWrapper=".gallery_wrap",imgContainer=".gallery_row",imgSelector=".gallery_row img",active="activeImg",activeClass=".activeImg",activeImg="img.activeImg",pBtn=".pBtn",nBtn=".nBtn",playBtnSelector=".start",pauseBtn=".stop",progressBarSelector=".progress",progressWidth,imageCountSelector=".imageCount",uiHovers=".pBtn:hover, .nBtn:hover, .start:hover, .stop:hover",uiCursors=".pBtn, .nBtn, .start, .stop",pnBtns=".pBtn, .nBtn, .pBtn:hover, .nBtn:hover",pArrowSelector=".pBtn i",nArrowSelector=".nBtn i",navHeight=$("nav").outerHeight(),footerHeight=navHeight;$(window).width()<768&&(console.log("mobile"),footerHeight=navHeight/1.4);var footer="",galleryArray=[];buildDOM(),styleDOM(),startLoading(),$(window).bind("resize",function(){scaleImages(),imgContainerWidth(),resizeBurlington()}),window.addEventListener("orientationchange",function(){scaleImages(),imgContainerWidth(),resizeBurlington()},!1);